<div class="space-y-6">
  <%= render PageHeaderComponent.new(
    title: "Budgets",
    subtitle: "#{Date::MONTHNAMES[@month]} #{@year}"
  ) do |header| %>
    <% header.with_actions do %>
      <%= render ButtonComponent.new(variant: :primary, href: new_budget_path, icon: "plus") do %>
        New Budget
      <% end %>
    <% end %>
  <% end %>

  <% if @budgets.any? %>
    <div class="space-y-4">
      <% @budgets.each do |budget| %>
        <%= render CardComponent.new do %>
          <div class="flex justify-between items-start mb-3">
            <div>
              <h3 class="text-lg font-semibold text-text-primary"><%= budget.category.name %></h3>
              <p class="text-sm text-text-secondary">
                <%= number_to_currency(budget.spent) %> of <%= number_to_currency(budget.amount) %> spent
              </p>
            </div>
            <div class="flex items-center space-x-2">
              <%= render ButtonComponent.new(variant: :secondary, size: :sm, href: transactions_budget_path(budget), icon: "eye") do %>
                View
              <% end %>
              <%= render ButtonComponent.new(variant: :ghost, size: :sm, href: edit_budget_path(budget)) do %>
                Edit
              <% end %>
              <%= render ButtonComponent.new(variant: :danger, size: :sm, href: budget_path(budget), method: :delete, confirm: "Are you sure?") do %>
                Delete
              <% end %>
            </div>
          </div>
          <%= render ProgressBarComponent.new(
            value: budget.spent,
            max: budget.amount,
            show_percentage: false
          ) %>
          <p class="mt-2 text-sm text-text-secondary">
            <%= number_to_currency(budget.remaining) %> remaining (<%= budget.percent_used %>% used)
          </p>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <%= render CardComponent.new do %>
      <%= render EmptyStateComponent.new(
        title: "No budgets set",
        description: "Create your first budget to start tracking spending.",
        icon: "chart-pie",
        action_text: "Create Budget",
        action_url: new_budget_path
      ) %>
    <% end %>
  <% end %>
</div>
